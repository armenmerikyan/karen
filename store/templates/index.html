{% extends 'base.html' %}

{% load custom_filters %}

{% block content %}

<!-- Displaying JSON data -->
<section class="py-0">
  <div class="container-fluid">
    <div class="container mt-5 text-light">         
      <div class="row">
        
        {% if not user.is_authenticated %}
        <div class="col-md-12 text-center">   
          <h2 class="card-title text-center mb-4">Register</h2>
          <p class="card-text text-center">Take a moment to 
            <a href="{% url 'register' %}" class="nav-link">Create Account</a>
          </p>   
          <HR>  
        </div>
        {% endif %}
        <div class="col-md-12 text-center">  

          <h2 class="card-title text-center mb-4">Solana Wallet Address</h2>
          <p class="card-text text-center">Please send all donations and other funds to the following Solana wallet address:</p>
          <div class="alert alert-info text-center">
              <strong>Solana Wallet Address:</strong> <br>
              <code class="text-break"><a href="https://solscan.io/account/{{profile.wallet}}" >{{profile.wallet}}</a></code>
          </div>
          <p class="text-center">Thank you for your support!</p>

          
             
        </div>
        <div class="col-md-12 text-center">   
            <h2 class="card-title text-center mb-4">x.com handle</h2>
            <p class="card-text text-center">Please follow x account at:</p>
            <div class="alert alert-info text-center">
              <strong>x.com handle:</strong> <br>
              <code class="text-break"><a href="https://x.com/{{profile.x_handle}}" >@{{profile.x_handle}}</a></code>
            </div>
        </div>    

        <div class="col-md-12 text-center"> 
          <h2 class="card-title text-center mb-4">Solana Token(s)</h2>
          <p class="card-text text-center">Tokens created on Solana blockchain</p>
          {% for token in tokens %}
          <li>
              {{ token.name }} - {{ token.address }}  
              <BR>
              {{ token.description }}  
          </li>
          {% endfor %}    
        </div>        
      </div>
      
    </div>
  </div>
</section>    

<div id="chat-container">
  <div id="chat-box"></div>
  <div id="input-container">
      <input type="text" id="user-input" placeholder="Type a message...">
      <button id="send-button">Send</button>
  </div>
</div>
<script>
  document.getElementById("send-button").addEventListener("click", sendMessage);
  document.getElementById("user-input").addEventListener("keypress", function(event) {
      if (event.key === "Enter") sendMessage();
  });

  function sendMessage() {
      const userInput = document.getElementById("user-input");
      const message = userInput.value.trim();
      if (!message) return;
      appendMessage("user", message);
      userInput.value = "";
      setTimeout(() => appendMessage("bot", "I'm a bot!"), 1000);
  }

  function appendMessage(sender, text) {
      const chatBox = document.getElementById("chat-box");
      const msgDiv = document.createElement("div");
      msgDiv.classList.add("message", sender);
      msgDiv.textContent = text;
      chatBox.appendChild(msgDiv);
      chatBox.scrollTop = chatBox.scrollHeight;
  }
</script>
{% endblock %}
